<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Encryption Playground</title>
  <script src="crypto-js.min.js"></script>
  <script src="jsencrypt.min.js"></script>
  <style>
    body {
      background: #121212;
      color: white;
      font-family: Arial, sans-serif;
      padding: 2rem;
    }
    textarea, input[type="text"] {
      width: 100%;
      margin-bottom: 1rem;
    }
    textarea {
      min-height: 100px;
    }
    .result {
      white-space: pre-wrap;
      background: #1e1e1e;
      padding: 1rem;
      border-left: 5px solid #4fc3dc;
    }
    .btn {
      background: #4fc3dc;
      color: #121212;
      padding: 0.5rem 1rem;
      border: none;
      cursor: pointer;
      margin: 0.5rem 0.5rem 0.5rem 0;
    }
    select {
      margin-bottom: 1rem;
    }
    #toast {
      visibility: hidden;
      min-width: 250px;
      margin-left: -125px;
      background-color: #333;
      color: #fff;
      text-align: center;
      border-radius: 2px;
      padding: 16px;
      position: fixed;
      z-index: 1;
      left: 50%;
      bottom: 30px;
      font-size: 17px;
    }
    #toast.show {
      visibility: visible;
      animation: fadein 0.5s, fadeout 0.5s 2.5s;
    }
    @keyframes fadein {
      from {bottom: 0; opacity: 0;}
      to {bottom: 30px; opacity: 1;}
    }
    @keyframes fadeout {
      from {bottom: 30px; opacity: 1;}
      to {bottom: 0; opacity: 0;}
    }
  </style>
</head>
<body>
  <div id="toast">Copied to clipboard!</div>
  <h1>Encryption Playground</h1>
  <p><strong>How to Use:</strong></p>
  <ul>
    <li>Select an encryption algorithm from the dropdown menu.</li>
    <li>Enter the text in the textarea or upload a .txt file.</li>
    <li>If the selected algorithm requires a key, enter the key in the input field.</li>
    <li>Click <strong>Encrypt</strong> or <strong>Decrypt</strong> to process the text.</li>
  </ul>
  <p><strong>Key Requirements:</strong></p>
  <ul>
    <li><strong>Caesar:</strong> Key = shift number (e.g., 3). Default is 3 if empty.</li>
    <li><strong>Atbash:</strong> No key needed.</li>
    <li><strong>Vigenere:</strong> Key = any word or phrase.</li>
    <li><strong>XOR:</strong> Key = text/phrase used to XOR characters.</li>
    <li><strong>AES:</strong> Key = password used for symmetric encryption.</li>
    <li><strong>RSA:</strong> Use a public key for encryption and private key for decryption.</li>
  </ul>
  <hr>

  <label for="algorithm">Choose algorithm:</label>
  <select id="algorithm">
    <option value="caesar">Caesar</option>
    <option value="atbash">Atbash</option>
    <option value="vigenere">Vigenere</option>
    <option value="xor">XOR</option>
    <option value="aes">AES</option>
    <option value="rsa">RSA</option>
  </select>

  <input type="text" id="key" placeholder="Key (if required)" />
  <textarea id="input" placeholder="Enter your text..."></textarea>

  <input type="file" id="fileInput" class="btn">
  <button class="btn" onclick="encrypt()">Encrypt</button>
  <button class="btn" onclick="decrypt()">Decrypt</button>
  <div class="result" id="output"></div>
  <button class="btn" onclick="copyOutput()">Copy Output</button>
  <button class="btn" onclick="downloadOutput()">Download .txt</button>

  <script>
    document.getElementById("fileInput").addEventListener("change", function(e) {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function(event) {
        document.getElementById("input").value = event.target.result;
      };
      reader.readAsText(file);
    });

    function copyOutput() {
      const output = document.getElementById("output").innerText;
      if (!output) {
        alert("Nothing to copy!");
        return;
      }
      navigator.clipboard.writeText(output).then(() => {
        const toast = document.getElementById("toast");
        toast.innerText = "Copied to clipboard!";
        toast.className = "show";
        setTimeout(() => { toast.className = toast.className.replace("show", ""); }, 3000);
      });
    }

    function downloadOutput() {
      const output = document.getElementById("output").innerText;
      if (!output) {
        const toast = document.getElementById("toast");
        toast.innerText = "Nothing to download!";
        toast.className = "show";
        setTimeout(() => { toast.className = toast.className.replace("show", ""); }, 3000);
        return;
      }
      const blob = new Blob([output], { type: 'text/plain' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'output.txt';
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }
  </script>
</body>
</html>
